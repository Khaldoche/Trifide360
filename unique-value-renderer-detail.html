<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniqueValueRenderer - Détail</title>
    <style>
        /* Styles intégrés pour correspondre à la page principale */
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --background: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --code-bg: #f1f5f9;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: transparent;
            margin: 0;
            padding: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }

        h2 {
            color: var(--secondary-color);
            font-size: 1.8rem;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        h3 {
            color: var(--accent-color);
            font-size: 1.3rem;
            margin-top: 25px;
            margin-bottom: 10px;
        }

        .file-structure {
            font-family: 'Courier New', monospace;
            background: var(--code-bg);
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            margin: 15px 0;
            line-height: 1.6;
            white-space: pre;
            overflow-x: auto;
        }

        .code-block {
            background: var(--code-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .feature-card h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .pattern-card {
            border-left: 4px solid var(--success-color);
            background: #f0fdf4;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 8px 8px 0;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="card">
        <h2>UniqueValueRenderer - Rendu par Valeurs Uniques</h2>
        
        <div class="file-structure"><strong>UniqueValueRenderer : IRenderer</strong> - Rendu selon valeurs distinctes d'un champ
├── <strong>Properties Core :</strong>
│   ├── string FieldName { get; set; } - Champ source pour classification
│   ├── Dictionary&lt;object, Symbol&gt; ValueSymbols { get; } - Mapping valeur → symbole
│   ├── Symbol DefaultSymbol { get; set; } - Symbole pour valeurs non mappées
│   ├── string DefaultLabel { get; set; } - Label pour symbole par défaut
│   ├── bool ShowDefaultInLegend { get; set; } - Affichage défaut en légende
│   └── int MaxUniqueValues { get; set; } - Limite valeurs uniques (défaut: 100)
├── <strong>Properties Configuration :</strong>
│   ├── bool CaseSensitive { get; set; } - Comparaison sensible à la casse
│   ├── StringComparison ComparisonMode { get; set; } - Mode comparaison strings
│   ├── bool AllowNullValues { get; set; } - Gestion valeurs null
│   ├── object NullValueReplacement { get; set; } - Remplacement pour null
│   └── Dictionary&lt;object, string&gt; ValueLabels { get; } - Labels personnalisés par valeur
├── <strong>Constructors :</strong>
│   ├── UniqueValueRenderer() - Renderer vide
│   ├── UniqueValueRenderer(string fieldName) - Avec champ source
│   ├── UniqueValueRenderer(string fieldName, Symbol defaultSymbol) - Complet
│   └── UniqueValueRenderer(string fieldName, Dictionary&lt;object, Symbol&gt; mapping) - Avec mapping
├── <strong>Methods - Gestion Valeurs/Symboles :</strong>
│   ├── void AddValue(object value, Symbol symbol) - Ajout mapping valeur-symbole
│   ├── void AddValue(object value, Symbol symbol, string label) - Avec label
│   ├── bool RemoveValue(object value) - Suppression mapping
│   ├── void ClearValues() - Suppression tous mappings
│   ├── Symbol GetSymbolForValue(object value) - Récupération symbole par valeur
│   ├── void SetSymbolForValue(object value, Symbol symbol) - Modification symbole
│   ├── bool HasValue(object value) - Test existence valeur
│   └── object[] GetUniqueValues() - Liste toutes valeurs mappées
├── <strong>Methods - Auto-Configuration :</strong>
│   ├── void GenerateFromData(FeatureCollection features) - Génération auto depuis données
│   ├── void GenerateFromData(FeatureCollection features, ColorRamp colorRamp) - Avec palette
│   ├── void ApplyColorRamp(ColorRamp colorRamp) - Application palette existante
│   ├── void ApplySymbolTemplate(SymbolTemplate template) - Application modèle symboles
│   └── void OptimizeForPerformance() - Optimisation performance
├── <strong>Methods - IRenderer Implementation :</strong>
│   ├── Symbol GetSymbol(Feature feature) - Symbole selon valeur feature
│   ├── Symbol GetDefaultSymbol() - Retourne DefaultSymbol
│   ├── bool CanRender(Feature feature) - Test si feature a champ requis
│   ├── RenderResult Render(Feature feature, RenderContext context) - Rendu conditionnel
│   └── LegendItem[] GetLegendItems() - Éléments légende par valeur
├── <strong>Methods - Analyse :</strong>
│   ├── Dictionary&lt;object, int&gt; GetValueFrequencies(FeatureCollection features) - Fréquences
│   ├── ValueStatistics GetValueStatistics(FeatureCollection features) - Stats complètes
│   ├── object[] GetMostCommonValues(int count) - Valeurs les plus fréquentes
│   ├── object[] GetRareValues(int maxFrequency) - Valeurs rares
│   └── bool ValidateAgainstData(FeatureCollection features) - Validation cohérence
├── <strong>Static Factory :</strong>
│   ├── UniqueValueRenderer CreateAutomatic(FeatureCollection features, string fieldName) - Auto
│   ├── UniqueValueRenderer CreateWithColorRamp(string fieldName, ColorRamp ramp) - Avec palette
│   └── UniqueValueRenderer CreateCategorical(string fieldName, CategoryScheme scheme) - Catégoriel
└── <strong>Events :</strong>
    ├── ValueAdded, ValueRemoved - Modification mappings
    ├── DefaultSymbolChanged - Changement symbole par défaut
    └── FieldNameChanged - Changement champ source</div>
    </div>

    <div class="card">
        <h2>Classes Support pour UniqueValueRenderer</h2>
        
        <div class="file-structure"><strong>ValueStatistics : class</strong> - Statistiques détaillées des valeurs
├── <strong>Properties :</strong>
│   ├── string FieldName { get; } - Champ analysé
│   ├── int TotalFeatureCount { get; } - Nombre total features
│   ├── int UniqueValueCount { get; } - Nombre valeurs distinctes
│   ├── int NullValueCount { get; } - Nombre valeurs null
│   ├── Dictionary&lt;object, int&gt; ValueFrequencies { get; } - Fréquence par valeur
│   ├── object MostCommonValue { get; } - Valeur la plus fréquente
│   ├── object LeastCommonValue { get; } - Valeur la plus rare
│   └── DateTime CalculationDate { get; } - Date calcul
├── <strong>Methods :</strong>
│   ├── double GetFrequencyPercentage(object value) - Pourcentage fréquence
│   ├── object[] GetTopValues(int count) - Top N valeurs
│   ├── object[] GetRareValues(int maxFrequency) - Valeurs rares
│   ├── string GenerateReport() - Rapport textuel
│   └── void ExportToCSV(string filePath) - Export CSV

<strong>ColorRamp : class</strong> - Dégradé de couleurs
├── <strong>Properties :</strong>
│   ├── Color StartColor { get; set; } - Couleur début
│   ├── Color EndColor { get; set; } - Couleur fin
│   ├── int StepCount { get; set; } - Nombre étapes
│   ├── ColorInterpolationMode Mode { get; set; } - Mode interpolation
│   └── Color[] Colors { get; } - Couleurs générées
├── <strong>Static Factory :</strong>
│   ├── ColorRamp Rainbow { get; } - Arc-en-ciel
│   ├── ColorRamp Grayscale { get; } - Niveaux de gris
│   ├── ColorRamp HeatMap { get; } - Carte chaleur
│   ├── ColorRamp CreateGradient(Color start, Color end, int steps) - Dégradé personnalisé
│   └── ColorRamp CreateFromColors(Color[] colors) - Depuis palette
├── <strong>Methods :</strong>
│   ├── Color GetColor(int index) - Couleur par index
│   ├── Color GetColorByRatio(double ratio) - Couleur par ratio (0-1)
│   ├── Color[] GenerateColors(int count) - Génération couleurs
│   └── ColorRamp Reverse() - Inversion dégradé

<strong>SymbolTemplate : class</strong> - Modèle de symboles
├── <strong>Properties :</strong>
│   ├── string Name { get; set; } - Nom modèle
│   ├── GeometryType TargetType { get; } - Type géométrie cible
│   ├── SymbolSize BaseSize { get; set; } - Taille de base
│   ├── Dictionary&lt;string, object&gt; Parameters { get; } - Paramètres modèle
│   └── string Description { get; set; } - Description
├── <strong>Methods :</strong>
│   ├── Symbol CreateSymbol(Color color) - Création symbole coloré
│   ├── Symbol CreateSymbol(Color color, double size) - Avec taille
│   ├── Symbol[] CreateSymbolSet(Color[] colors) - Ensemble symboles
│   └── bool IsCompatibleWith(GeometryType geometryType) - Test compatibilité
└── <strong>Static Predefined :</strong>
    ├── SymbolTemplate BasicPoints { get; } - Points basiques
    ├── SymbolTemplate BasicLines { get; } - Lignes basiques
    ├── SymbolTemplate BasicPolygons { get; } - Polygones basiques
    └── SymbolTemplate Categorical { get; } - Style catégoriel</div>
    </div>

    <div class="card">
        <h2>Patterns de Conception Spécialisés</h2>
        <div class="features-grid">
            <div class="pattern-card">
                <h4>Strategy Pattern</h4>
                <p><strong>Implementation:</strong> Différentes stratégies de comparaison de valeurs</p>
                <p><strong>Usage:</strong> StringComparison, comparaison numérique, comparaison null</p>
                <p><strong>Avantage:</strong> Flexibilité selon types données</p>
            </div>
            <div class="pattern-card">
                <h4>Factory Pattern</h4>
                <p><strong>Implementation:</strong> Méthodes CreateAutomatic(), CreateWithColorRamp()</p>
                <p><strong>Usage:</strong> Génération automatique renderers selon données</p>
                <p><strong>Avantage:</strong> Configuration rapide et intelligente</p>
            </div>
            <div class="pattern-card">
                <h4>Template Method</h4>
                <p><strong>Implementation:</strong> GenerateFromData() avec étapes configurables</p>
                <p><strong>Usage:</strong> Analyse données → extraction valeurs → génération symboles</p>
                <p><strong>Avantage:</strong> Personnalisation étapes génération</p>
            </div>
            <div class="pattern-card">
                <h4>Observer Pattern</h4>
                <p><strong>Implementation:</strong> Events ValueAdded, ValueRemoved</p>
                <p><strong>Usage:</strong> Synchronisation légende avec changements mapping</p>
                <p><strong>Avantage:</strong> Mise à jour automatique interface</p>
            </div>
        </div>
    </div>

   
</body>
</html>